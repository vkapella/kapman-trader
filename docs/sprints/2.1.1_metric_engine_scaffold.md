# Story 2.1.1 â€” Metric Engine Scaffold

## Purpose
Define a deterministic execution scaffold for metric engines without
implementing any metric logic.

## Relies On (Established Invariants)
- Metric storage schema (SPIKE 2.1.B)
- DB idempotency and versioning guarantees
- Config JSON schema contracts and enforcement
- No embedded interpretation or scoring logic

## Explicitly Out of Scope
- Metric formulas or calculations
- Technical indicators
- Dealer / options math
- Scoring, ranking, or regime logic
- Performance optimization or parallelism

## Must Not Change
- Database schemas
- Primary key semantics
- Config identity model
- Algorithm identity fields (`algo_version`, `algo_git_sha`)

## Acceptance Criteria
- Metric engine base interface defined
- Engine registry resolves by metric family
- Execution context constructed deterministically
- Stub engines execute end-to-end
- Writes succeed with correct identity fields
- Re-runs are idempotent
- No metric math implemented

## Definition of Done
- All acceptance criteria met
- No new invariants introduced
- Story map updated to reflect completion